(this["webpackJsonpteko-product-discovery"]=this["webpackJsonpteko-product-discovery"]||[]).push([[5],{150:function(e,t,a){"use strict";function n(e){if(null===e||void 0===e)return"";for(var t=e.toString(),a=/(-?\d+)(\d{3})/;a.test(t);)t=t.replace(a,"$1.$2");return t}function i(e,t){return Math.floor((e-t)/e*100)}a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i}))},159:function(e,t,a){"use strict";var n=a(148),i=function e(){Object(n.a)(this,e),this.product=void 0,this.quantity=0},c=function e(){Object(n.a)(this,e),this.sku=void 0,this.name=void 0,this.url=void 0,this.seller=void 0,this.brand=void 0,this.status=void 0,this.objective=void 0,this.productType=void 0,this.images=void 0,this.price=void 0,this.productLine=void 0,this.stocks=void 0,this.totalAvailable=void 0,this.isBundle=void 0,this.bundleProducts=void 0,this.parentBundles=void 0,this.totalAvailableByStocks=void 0,this.displayName=void 0,this.color=void 0,this.tags=void 0,this.promotionPrices=void 0,this.promotions=void 0,this.flashSales=void 0,this.attributeSet=void 0,this.categories=void 0,this.magentoId=void 0,this.seoInfo=void 0,this.rating=void 0,this.allActiveFlashSales=void 0,this.productGroup=void 0,this.attributes=void 0,this.saleCategories=void 0,this.taxOut=void 0,this.taxOutCode=void 0,this.attributeGroups=void 0,this.warranty=void 0,this.createdAt=void 0,this.salePoint=void 0,this.importPrice=void 0,this.recommendMethod=void 0},r=function e(){Object(n.a)(this,e),this.saleCategories=613,this.channel="pv_online",this.terminal="phongvu",this.saleStatuses="hang_ban,hang_dat_truoc,hang_sap_het,hang_moi,hang_trung_bay,hang_thanh_ly",this._sort="saleStatuses||hang_ban|hang_dat_truoc|hang_sap_het|hang_moi||hang_trung_bay|hang_thanh_ly||ngung_kinh_doanh",this._order="asc",this._page=1,this._limit=10,this.q=void 0};a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return r}))},160:function(e,t,a){"use strict";var n=a(150),i=a(0),c=a.n(i);a(161);t.a=function(e){var t,a=e.product,i=e.discountRate;return i>0?c.a.createElement("div",{className:"product-discount"},c.a.createElement("div",{className:"product-discount-price"},Object(n.b)(null===(t=a.price)||void 0===t?void 0:t.sellPrice),c.a.createElement("sup",null,"\u0111")),c.a.createElement("div",{className:"product-discount-rate"},"-".concat(i,"%"))):null}},161:function(e,t,a){},162:function(e,t,a){"use strict";var n=a(150),i=a(0),c=a.n(i);a(163);t.a=function(e){var t,a,i=e.product;return(null===i||void 0===i?void 0:null===(t=i.price)||void 0===t?void 0:t.supplierSalePrice)?c.a.createElement("div",{className:"product-price"},Object(n.b)(null===(a=i.price)||void 0===a?void 0:a.supplierSalePrice),c.a.createElement("sup",null,"\u0111")):null}},163:function(e,t,a){},172:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(183),i=a.n(n);function c(e){var t;return"".concat(i()((null===e||void 0===e?void 0:null===(t=e.name)||void 0===t?void 0:t.toLowerCase())||""),"-pro.").concat(null===e||void 0===e?void 0:e.sku)}},173:function(e,t,a){"use strict";var n=a(19),i=a.n(n),c=a(148),r=a(203),s=a(184),l=a(205),o={withCredentials:!0,baseURL:"https://listing.stage.tekoapis.net",headers:{"Content-Type":"application/json"}},u=a(185),d=a(186),v=a.n(d),p=new(function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(r.a)(this,Object(s.a)(t).call(this,o))).search=function(t){return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",e.http.get("/api/search/",{params:t}).then((function(e){return e.data})));case 1:case"end":return a.stop()}}))},e.get=function(t,a){var n,c;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i.a.awrap(e.http.get("/api/products/".concat(t),{params:a}));case 2:return n=r.sent,c=n.data.result.product,r.abrupt("return",c);case 5:case"end":return r.stop()}}))},e}return Object(l.a)(t,e),t}(function(){function e(t){Object(c.a)(this,e),this.http=void 0,this.http=v.a.create(o)}return Object(u.a)(e,[{key:"setBaseURL",value:function(e){this.http.defaults.baseURL=e}}]),e}()));a.d(t,"a",(function(){return p}))},206:function(e,t,a){},280:function(e,t,a){},310:function(e,t,a){"use strict";a.r(t);var n=a(19),i=a.n(n),c=a(152),r=a(164),s=a.n(r),l=a(195),o=a.n(l),u=a(281),d=a.n(u),v=a(31),p=a.n(v),m=a(160),h=a(162),b=a(149),f=a.n(b),g=a(251),E=a.n(g),k=a(0),y=a.n(k);a(206);var N=function(e){var t=e.onChange,a=e.value,n=k.useCallback((function(e){var a=parseInt(e,10)||0;t&&t(a)}),[t]),i=k.useCallback((function(e){1===e.key.length&&(e.key<"0"||e.key>"9")&&e.preventDefault()}),[]),c=k.useCallback((function(e){n(e.target.value)}),[n]),r=k.useCallback((function(){"undefined"!==typeof a&&n(a+1)}),[n,a]),l=k.useCallback((function(){"undefined"!==typeof a&&a>0&&n(a-1)}),[n,a]);return k.createElement("div",{className:"quantity-input"},k.createElement(s.a,{className:"minus",onClick:l},k.createElement(f.a,{type:"minus"})),k.createElement(E.a,{value:a,onChange:c,onKeyDown:i}),k.createElement(s.a,{className:"plus",onClick:r},k.createElement(f.a,{type:"plus"})))},j=a(150),C=a(172);var O=a(202),_=a(159),S=a(7),w=a.n(S);var P=a(8),x=a(2),T=a(173);var M=a(22),q=a(303),I=a.n(q),R=a(305),A=a.n(R),B=a(304),L=a.n(B),G=a(197),H=a.n(G),U=(a(280),d.a.TabPane);t.default=function(){var e,t,a,n=function(){var e=y.a.useState(new _.b),t=Object(c.a)(e,2),a=t[0],n=t[1],i=y.a.useState([]),r=Object(c.a)(i,2),s=r[0],l=r[1],o=Object(x.h)().id;y.a.useEffect((function(){o&&T.a.get(o,new _.c).then((function(e){n(e)}))}),[o]),y.a.useEffect((function(){T.a.search(new _.c).then((function(e){var t;(null===(t=e.result)||void 0===t?void 0:t.products)&&l(e.result.products)}))}),[]);var u=y.a.useMemo((function(){var e,t;return(null===a||void 0===a?void 0:null===(e=a.price)||void 0===e?void 0:e.supplierSalePrice)&&(null===a||void 0===a?void 0:a.price.sellPrice)?Object(j.a)(null===a||void 0===a?void 0:null===(t=a.price)||void 0===t?void 0:t.supplierSalePrice,null===a||void 0===a?void 0:a.price.sellPrice):0}),[a]),d=Object(x.g)(),v=y.a.useCallback((function(){d.push(P.c)}),[d]);return[a,s,u,v]}(),r=Object(c.a)(n,4),l=r[0],u=r[1],v=r[2],b=r[3],f=function(e){var t=y.a.useState(0),a=Object(c.a)(t,2),n=a[0],i=a[1],r=y.a.useMemo((function(){var t,a;return n*((null===(t=e.price)||void 0===t?void 0:t.sellPrice)||(null===(a=e.price)||void 0===a?void 0:a.supplierSalePrice)||0)}),[e.price,n]);return[n,i,r]}(l),g=Object(c.a)(f,3),E=g[0],k=g[1],S=g[2],q=function(){var e=w.a.useGlobal("cartContents"),t=Object(c.a)(e,2),a=t[0],n=t[1],r=w.a.useCallback((function(e,t){var c,r;return i.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return(c=a.findIndex((function(t){var a;return(null===(a=t.product)||void 0===a?void 0:a.sku)===e.sku})))>=0?(r=a[c]).quantity+=t:((r=new _.a).product=e,r.quantity=t,a.push(r)),s.next=4,i.a.awrap(n(Object(O.a)(a)));case 4:case"end":return s.stop()}}))}),[a,n]);return[a,n,r]}(),R=Object(c.a)(q,3),B=R[0],G=R[2],D=w.a.useMemo((function(){var e=l.images;return void 0===e?[]:e}),[l]),J=function(e){var t=w.a.useState(!1),a=Object(c.a)(t,2),n=a[0],i=a[1],r=w.a.useState(0),s=Object(c.a)(r,2),l=s[0],o=s[1],u=w.a.useCallback((function(){n||o((l+1)%e.length)}),[n,l,e.length]),d=w.a.useCallback((function(){n||o((l-1+e.length)%e.length)}),[n,l,e.length]),v=w.a.useCallback((function(e){n||o(e)}),[n]),p=w.a.useCallback((function(){i(!0)}),[i]),m=w.a.useCallback((function(){i(!1)}),[i]);return[l,n,u,d,v,p,m]}(D),K=Object(c.a)(J,7),$=K[0],F=K[2],z=K[3],Q=K[4],V=K[5],W=K[6],X=w.a.useCallback((function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==E){e.next=3;break}return o.a.error("B\u1ea1n ch\u01b0a ch\u1ecdn s\u1ed1 l\u01b0\u1ee3ng mu\u1ed1n mua"),e.abrupt("return");case 3:return e.next=5,i.a.awrap(G(l,E));case 5:o.a.success("Th\xeam s\u1ea3n ph\u1ea9m v\xe0o gi\u1ecf h\xe0ng th\xe0nh c\xf4ng"),k(0);case 7:case"end":return e.stop()}}))}),[G,l,E,k]),Y=w.a.useState(!0),Z=Object(c.a)(Y,2),ee=Z[0],te=Z[1],ae=w.a.useCallback((function(){te(!ee)}),[ee]),ne=w.a.useMemo((function(){return D.map((function(e){return w.a.createElement(H.a,{onExiting:V,onExited:W,key:e.url},w.a.createElement("img",{src:e.url,alt:""}))}))}),[W,V,D]);return w.a.createElement("div",{className:"view mobile-view product-detail"},w.a.createElement("div",{className:"header"},w.a.createElement("button",{className:"btn btn-link btn-go-back",type:"button",onClick:b},w.a.createElement("img",{src:"/images/arrow-back-black.png",alt:""})),w.a.createElement("div",{className:"product-title"},w.a.createElement("div",{className:"name"},l.name),w.a.createElement("div",{className:"price"},Object(j.b)(null===(e=l.price)||void 0===e?void 0:e.supplierSalePrice),w.a.createElement("sup",null,"\u0111"))),w.a.createElement("button",{type:"button",className:"btn btn-link btn-cart"},w.a.createElement("img",{src:"/images/cart.png",alt:""}),B&&B.length>0&&w.a.createElement("span",{className:"quantity"},B.length))),w.a.createElement("div",{className:"product-content"},w.a.createElement("div",{className:"product-images"},w.a.createElement(I.a,{next:F,previous:z,activeIndex:$},w.a.createElement(L.a,{items:D,activeIndex:$,onClickHandler:Q}),ne,w.a.createElement(A.a,{direction:"prev",directionText:"",onClickHandler:z}),w.a.createElement(A.a,{direction:"next",directionText:"",onClickHandler:F}))),w.a.createElement("div",{className:"product-selling-info"},w.a.createElement("div",{className:"name"},l.name),w.a.createElement("div",{className:"code"},w.a.createElement("span",{className:"label"},"M\xe3 SP:"),w.a.createElement("span",{className:"value"},l.sku)),w.a.createElement(h.a,{product:l}),w.a.createElement(m.a,{product:l,discountRate:v})),w.a.createElement("div",{className:"product-info-tabs"},w.a.createElement(d.a,{defaultActiveKey:"2"},w.a.createElement(U,{key:"1",tab:"M\xf4 t\u1ea3 s\u1ea3n ph\u1ea9m",disabled:!0}),w.a.createElement(U,{key:"2",tab:"Th\xf4ng s\u1ed1 k\u1ef9 thu\u1eadt"},w.a.createElement("ul",{className:p()("odds",{collapsed:ee})},null===(t=l.attributeGroups)||void 0===t?void 0:t.map((function(e,t){return w.a.createElement("li",{className:p()(t%2===1?"odd":"even"),key:"".concat(e.id,"-").concat(t)},w.a.createElement("span",{className:"name"},e.name),w.a.createElement("span",{className:"value"},e.value))})),w.a.createElement("li",{className:"overlay"},w.a.createElement(s.a,{type:"link",htmlType:"button",onClick:ae},ee?"Hi\u1ec3n th\u1ecb nhi\u1ec1u h\u01a1n":"Thu g\u1ecdn")))),w.a.createElement(U,{key:"3",tab:"So s\xe1nh gi\xe1",disabled:!0}))),u.length>0&&w.a.createElement("div",{className:"similar-products"},u.map((function(e){var t,a=e.images,n=void 0===a?[]:a,i=(null===(t=e.price)||void 0===t?void 0:t.supplierSalePrice)&&e.price.sellPrice?Object(j.a)(e.price.supplierSalePrice,e.price.sellPrice):0;return w.a.createElement(M.b,{key:e.sku,to:Object(C.a)(e),className:"product"},w.a.createElement("div",{className:"product-picture"},n.length>0&&w.a.createElement("img",{src:n[0].url,alt:""})),w.a.createElement("div",{className:"product-info"},w.a.createElement("div",{className:"name"},e.name),w.a.createElement(h.a,{product:e}),w.a.createElement(m.a,{product:e,discountRate:i})))}))),(null===(a=l.price)||void 0===a?void 0:a.supplierSalePrice)?w.a.createElement("div",{className:"product-buying"},w.a.createElement(N,{onChange:k,value:E}),w.a.createElement(s.a,{htmlType:"button",type:"primary",className:"add-to-cart",onClick:X},w.a.createElement("img",{src:"/images/add-to-cart.png",alt:""}),w.a.createElement("span",{className:"adding-price"},Object(j.b)(S),w.a.createElement("sup",null,"\u0111")))):null))}}}]);
//# sourceMappingURL=5.4887aa9c.chunk.js.map