{"version":3,"sources":["helpers/number.ts","models/CartContent.ts","models/Product.ts","models/ProductSearch.ts","models/index.ts","components/ProductDiscount/ProductDiscount.tsx","components/ProductPrice/ProductPrice.tsx","helpers/product.ts","config/http.ts","repositories/ProductRepository.ts","repositories/Repository.ts","repositories/index.ts","components/QuantityInput/QuantityInput.tsx","views/ProductDetails/ProductDetails.tsx","hooks/useProductDetail.ts","hooks/useAddingPrice.ts","hooks/useCart.ts","hooks/useSlide.ts"],"names":["formatNumber","x","undefined","r","toString","pattern","test","replace","calcDiscountRate","originPrice","discountPrice","Math","floor","CartContent","product","quantity","Product","sku","name","url","seller","brand","status","objective","productType","images","price","productLine","stocks","totalAvailable","isBundle","bundleProducts","parentBundles","totalAvailableByStocks","displayName","color","tags","promotionPrices","promotions","flashSales","attributeSet","categories","magentoId","seoInfo","rating","allActiveFlashSales","productGroup","attributes","saleCategories","taxOut","taxOutCode","attributeGroups","warranty","createdAt","salePoint","importPrice","recommendMethod","ProductSearch","channel","terminal","saleStatuses","_sort","_order","_page","_limit","q","ProductDiscount","props","discountRate","className","sellPrice","ProductPrice","supplierSalePrice","getProductPath","slugify","toLowerCase","httpConfig","withCredentials","baseURL","headers","search","productSearch","a","async","http","get","params","then","response","data","result","config","this","axios","create","defaults","QuantityInput","onChange","value","handleChange","React","event","parseInt","handleKeyDown","key","length","preventDefault","handleInputChange","target","handleIncrease","handleDecrease","onClick","type","onKeyDown","TabPane","Tabs","ProductDetails","useState","setProduct","similarProducts","setSimilarProducts","id","useParams","useEffect","productRepository","rootObject","products","useMemo","history","useHistory","handleGoBack","useCallback","push","PRODUCT_LISTING_ROUTE","useProductDetail","setQuantity","addingPrice","useAddingPrice","useGlobal","cartContents","setCartContents","handleAddToCart","currentIndex","findIndex","cartContent","useCart","addToCart","animating","setAnimating","activeIndex","setActiveIndex","handleNext","handlePrev","handleGoToIndex","handleExisting","handleExisted","useSlide","message","error","success","collapsed","setCollapsed","handleToggleDetail","slides","map","image","onExiting","onExited","src","alt","next","previous","items","onClickHandler","direction","directionText","defaultActiveKey","tab","disabled","classNames","attributeGroup","index","htmlType","to"],"mappings":"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","file":"static/js/5.4887aa9c.chunk.js","sourcesContent":["export function formatNumber(x: number | null | undefined): string {\n  if (x === null || x === undefined) {\n    return '';\n  }\n  let r: string = x.toString();\n  const pattern = /(-?\\d+)(\\d{3})/;\n  while (pattern.test(r)) {\n    r = r.replace(pattern, '$1.$2');\n  }\n  return r;\n}\n\nexport function calcDiscountRate(originPrice: number, discountPrice: number): number {\n  return Math.floor((originPrice - discountPrice) / originPrice * 100);\n}\n","import {Product} from 'models/Product';\n\nexport class CartContent {\n  public product?: Product;\n\n  public quantity: number = 0;\n}\n","import {\n  Attribute,\n  AttributeGroup,\n  AttributeSet,\n  Brand,\n  Category,\n  Color,\n  Image,\n  Objective,\n  ParentBundle,\n  Price,\n  Product as IProduct,\n  ProductLine,\n  ProductType,\n  Promotion,\n  PromotionPrice,\n  Rating,\n  SaleCategory,\n  Seller,\n  SeoInfo,\n  Status,\n  TotalAvailableByStock,\n  Warranty,\n} from 'teko-product-discovery';\n\nexport class Product implements IProduct {\n  public sku?: string;\n\n  public name?: string;\n\n  public url?: string;\n\n  public seller?: Seller;\n\n  public brand?: Brand;\n\n  public status?: Status;\n\n  public objective?: Objective;\n\n  public productType?: ProductType;\n\n  public images?: Image[];\n\n  public price?: Price;\n\n  public productLine?: ProductLine;\n\n  public stocks?: any[];\n\n  public totalAvailable?: number;\n\n  public isBundle?: boolean;\n\n  public bundleProducts?: any;\n\n  public parentBundles?: ParentBundle[];\n\n  public totalAvailableByStocks?: TotalAvailableByStock[];\n\n  public displayName?: string;\n\n  public color?: Color;\n\n  public tags?: any[];\n\n  public promotionPrices?: PromotionPrice[];\n\n  public promotions?: Promotion[];\n\n  public flashSales?: any[];\n\n  public attributeSet?: AttributeSet;\n\n  public categories?: Category[];\n\n  public magentoId?: number;\n\n  public seoInfo?: SeoInfo;\n\n  public rating?: Rating;\n\n  public allActiveFlashSales?: any[];\n\n  public productGroup?: any;\n\n  public attributes?: Attribute[];\n\n  public saleCategories?: SaleCategory[];\n\n  public taxOut?: number;\n\n  public taxOutCode?: string;\n\n  public attributeGroups?: AttributeGroup[];\n\n  public warranty?: Warranty;\n\n  public createdAt?: Date;\n\n  public salePoint?: number;\n\n  public importPrice?: any;\n\n  public recommendMethod?: any;\n}\n","export class ProductSearch {\n  public saleCategories?: number = 613;\n\n  public channel?: string = 'pv_online';\n\n  public terminal?: string = 'phongvu';\n\n  public saleStatuses?: string = 'hang_ban,hang_dat_truoc,hang_sap_het,hang_moi,hang_trung_bay,hang_thanh_ly';\n\n  // tslint:disable-next-line:variable-name\n  public _sort?: string = 'saleStatuses||hang_ban|hang_dat_truoc|hang_sap_het|hang_moi||hang_trung_bay|hang_thanh_ly||ngung_kinh_doanh';\n\n  // tslint:disable-next-line:variable-name\n  public _order?: 'asc' | 'desc' = 'asc';\n\n  // tslint:disable-next-line:variable-name\n  public _page: number = 1;\n\n  // tslint:disable-next-line:variable-name\n  public _limit: number = 10;\n\n  public q?: string;\n}\n","export {CartContent} from './CartContent';\n\nexport {Product} from './Product';\n\nexport {ProductSearch} from './ProductSearch';\n","import {formatNumber} from 'helpers/number';\nimport {Product} from 'models';\nimport React from 'react';\nimport './ProductDiscount.scss';\n\ninterface ProductDiscountProps {\n  product: Product;\n\n  discountRate: number;\n}\n\nfunction ProductDiscount(props: ProductDiscountProps) {\n  const {product, discountRate} = props;\n\n  return discountRate > 0 ? (\n    <div className=\"product-discount\">\n      <div className=\"product-discount-price\">\n        {formatNumber(product.price?.sellPrice)}\n        <sup>đ</sup>\n      </div>\n      <div className=\"product-discount-rate\">\n        {`-${discountRate}%`}\n      </div>\n    </div>\n  ) : null;\n}\n\nexport default ProductDiscount;\n","import {formatNumber} from 'helpers/number';\nimport {Product} from 'models';\nimport React from 'react';\nimport './ProductPrice.scss';\n\ninterface ProductPriceProps {\n  product: Product;\n}\n\nfunction ProductPrice(props: ProductPriceProps) {\n  const {product} = props;\n  return product?.price?.supplierSalePrice ? (\n    <div className=\"product-price\">\n      {formatNumber(product.price?.supplierSalePrice)}\n      <sup>đ</sup>\n    </div>\n  ) : null;\n}\n\nexport default ProductPrice;\n","import {Product} from 'models';\nimport slugify from 'slugify';\n\nexport function getProductPath(product: Product) {\n  return `${slugify(product?.name?.toLowerCase() || '')}-pro.${product?.sku}`;\n}\n","import {AxiosRequestConfig} from 'axios';\n\nexport const httpConfig: AxiosRequestConfig = {\n  withCredentials: true,\n  baseURL: 'https://listing.stage.tekoapis.net',\n  headers: {\n    'Content-Type': 'application/json',\n  },\n};\n","import {AxiosResponse} from 'axios';\nimport {httpConfig} from 'config/http';\nimport {Product, ProductSearch} from 'models';\nimport {Repository} from 'repositories/Repository';\nimport {RootObject} from 'teko-product-discovery';\n\nexport class ProductRepository extends Repository {\n  constructor() {\n    super(httpConfig);\n  }\n\n  public search = async (productSearch: ProductSearch): Promise<RootObject> => {\n    return this.http\n      .get('/api/search/', {\n        params: productSearch,\n      })\n      .then((response: AxiosResponse<RootObject>) => {\n        return response.data;\n      });\n  };\n\n  public get = async (sku: string, productSearch: ProductSearch): Promise<Product> => {\n    const {data: {result: {product}}} = await this.http\n      .get(`/api/products/${sku}`, {\n        params: productSearch,\n      });\n    return product;\n  };\n}\n\nexport default new ProductRepository();\n","import axios, {AxiosInstance, AxiosRequestConfig} from 'axios';\nimport {httpConfig} from 'config/http';\n\nexport class Repository {\n  protected http: AxiosInstance;\n\n  constructor(config?: AxiosRequestConfig) {\n    this.http = axios.create(httpConfig);\n  }\n\n  public setBaseURL(url: string) {\n    this.http.defaults.baseURL = url;\n  }\n}\n","export {default as productRepository} from 'repositories/ProductRepository';\n","import Button from 'antd/lib/button';\nimport Icon from 'antd/lib/icon';\nimport Input from 'antd/lib/input';\nimport * as React from 'react';\nimport './QuantityInput.scss';\n\ninterface QuantityInputProps {\n  value?: number;\n\n  onChange: (value: number) => void;\n}\n\nfunction QuantityInput(props: QuantityInputProps) {\n  const {onChange, value} = props;\n\n  const handleChange = React.useCallback(\n    (event) => {\n      const value: number = parseInt(event, 10) || 0;\n      if (onChange) {\n        onChange(value);\n      }\n    },\n    [onChange],\n  );\n\n  const handleKeyDown = React.useCallback((event) => {\n    if (event.key.length === 1) {\n      if (event.key < '0' || event.key > '9') {\n        event.preventDefault();\n      }\n    }\n  }, []);\n\n  const handleInputChange = React.useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      handleChange(event.target.value);\n    },\n    [handleChange],\n  );\n\n  const handleIncrease = React.useCallback(\n    () => {\n      if (typeof value !== 'undefined') {\n        handleChange(value + 1);\n      }\n    },\n    [handleChange, value],\n  );\n\n  const handleDecrease = React.useCallback(\n    () => {\n      if (typeof value !== 'undefined' && value > 0) {\n        handleChange(value - 1);\n      }\n    },\n    [handleChange, value],\n  );\n\n  return (\n    <div className=\"quantity-input\">\n      <Button className=\"minus\" onClick={handleDecrease}>\n        <Icon type=\"minus\"/>\n      </Button>\n      <Input value={value} onChange={handleInputChange} onKeyDown={handleKeyDown}/>\n      <Button className=\"plus\" onClick={handleIncrease}>\n        <Icon type=\"plus\"/>\n      </Button>\n    </div>\n  );\n}\n\nexport default QuantityInput;\n","import Button from 'antd/lib/button';\nimport message from 'antd/lib/message';\nimport Tabs from 'antd/lib/tabs';\nimport classNames from 'classnames';\nimport ProductDiscount from 'components/ProductDiscount/ProductDiscount';\nimport ProductPrice from 'components/ProductPrice/ProductPrice';\nimport QuantityInput from 'components/QuantityInput/QuantityInput';\nimport {calcDiscountRate, formatNumber} from 'helpers/number';\nimport {getProductPath} from 'helpers/product';\nimport {useAddingPrice} from 'hooks/useAddingPrice';\nimport {useCart} from 'hooks/useCart';\nimport {useProductDetail} from 'hooks/useProductDetail';\nimport {useSlide} from 'hooks/useSlide';\nimport {Product} from 'models';\nimport {Link} from 'react-router-dom';\nimport React from 'reactn';\nimport Carousel from 'reactstrap/lib/Carousel';\nimport CarouselControl from 'reactstrap/lib/CarouselControl';\nimport CarouselIndicators from 'reactstrap/lib/CarouselIndicators';\nimport CarouselItem from 'reactstrap/lib/CarouselItem';\nimport {AttributeGroup, Image} from 'teko-product-discovery';\nimport './ProductDetails.scss';\n\nconst {TabPane} = Tabs;\n\nfunction ProductDetails() {\n  const [product, similarProducts, discountRate, handleGoBack] = useProductDetail();\n\n  const [quantity, setQuantity, addingPrice] = useAddingPrice(product);\n\n  const [cartContents, , addToCart] = useCart();\n\n  const images: Image[] = React.useMemo(\n    () => {\n      const {images = []} = product;\n      return images;\n    },\n    [product],\n  );\n\n  const [\n    activeIndex,\n    ,\n    handleNext,\n    handlePrev,\n    handleGoToIndex,\n    handleExisting,\n    handleExisted,\n  ] = useSlide(images);\n\n  const handleAddToCart = React.useCallback(\n    async () => {\n      if (quantity === 0) {\n        message.error('Bạn chưa chọn số lượng muốn mua');\n        return;\n      }\n      await addToCart(product, quantity);\n      message.success('Thêm sản phẩm vào giỏ hàng thành công');\n      setQuantity(0);\n    },\n    [addToCart, product, quantity, setQuantity],\n  );\n\n  const [collapsed, setCollapsed] = React.useState<boolean>(true);\n\n  const handleToggleDetail = React.useCallback(\n    () => {\n      setCollapsed(!collapsed);\n    },\n    [collapsed],\n  );\n\n  const slides = React.useMemo(\n    () => {\n      return images.map((image: Image) => (\n        <CarouselItem\n          onExiting={handleExisting}\n          onExited={handleExisted}\n          key={image.url}\n        >\n          <img src={image.url} alt=\"\"/>\n        </CarouselItem>\n      ));\n    },\n    [handleExisted, handleExisting, images],\n  );\n\n  return (\n    <div className=\"view mobile-view product-detail\">\n      <div className=\"header\">\n        <button className=\"btn btn-link btn-go-back\" type=\"button\" onClick={handleGoBack}>\n          <img src=\"/images/arrow-back-black.png\" alt=\"\"/>\n        </button>\n        <div className=\"product-title\">\n          <div className=\"name\">\n            {product.name}\n          </div>\n          <div className=\"price\">\n            {formatNumber(product.price?.supplierSalePrice)}\n            <sup>đ</sup>\n          </div>\n        </div>\n        <button type=\"button\" className=\"btn btn-link btn-cart\">\n          <img src=\"/images/cart.png\" alt=\"\"/>\n          {cartContents && cartContents.length > 0 && (\n            <span className=\"quantity\">\n                {cartContents.length}\n              </span>\n          )}\n        </button>\n      </div>\n      <div className=\"product-content\">\n        <div className=\"product-images\">\n          <Carousel next={handleNext} previous={handlePrev} activeIndex={activeIndex}>\n            <CarouselIndicators items={images}\n                                activeIndex={activeIndex}\n                                onClickHandler={handleGoToIndex}/>\n            {slides}\n            <CarouselControl direction=\"prev\" directionText=\"\" onClickHandler={handlePrev}/>\n            <CarouselControl direction=\"next\" directionText=\"\" onClickHandler={handleNext}/>\n          </Carousel>\n        </div>\n\n        <div className=\"product-selling-info\">\n          <div className=\"name\">\n            {product.name}\n          </div>\n          <div className=\"code\">\n            <span className=\"label\">\n              Mã SP:\n            </span>\n            <span className=\"value\">\n              {product.sku}\n            </span>\n          </div>\n          <ProductPrice product={product}/>\n          <ProductDiscount product={product} discountRate={discountRate}/>\n        </div>\n\n        <div className=\"product-info-tabs\">\n          <Tabs defaultActiveKey=\"2\">\n            <TabPane key=\"1\" tab=\"Mô tả sản phẩm\" disabled={true}>\n            </TabPane>\n            <TabPane key=\"2\" tab=\"Thông số kỹ thuật\">\n              <ul className={classNames('odds', {\n                collapsed,\n              })}>\n                {product.attributeGroups?.map((attributeGroup: AttributeGroup, index: number) => (\n                  <li className={classNames((index % 2 === 1) ? 'odd' : 'even')} key={`${attributeGroup.id}-${index}`}>\n                    <span className=\"name\">\n                      {attributeGroup.name}\n                    </span>\n                    <span className=\"value\">\n                      {attributeGroup.value}\n                    </span>\n                  </li>\n                ))}\n                <li className=\"overlay\">\n                  <Button type=\"link\" htmlType=\"button\" onClick={handleToggleDetail}>\n                    {collapsed ? 'Hiển thị nhiều hơn' : 'Thu gọn'}\n                  </Button>\n                </li>\n              </ul>\n            </TabPane>\n            <TabPane key=\"3\" tab=\"So sánh giá\" disabled={true}>\n            </TabPane>\n          </Tabs>\n        </div>\n\n        {similarProducts.length > 0 && (\n          <div className=\"similar-products\">\n            {similarProducts.map((product: Product) => {\n              const {images = []} = product;\n              const discountRate: number =\n                (product.price?.supplierSalePrice && product.price.sellPrice)\n                  ? calcDiscountRate(product.price.supplierSalePrice, product.price.sellPrice)\n                  : 0;\n              return (\n                <Link key={product.sku} to={getProductPath(product)} className=\"product\">\n                  <div className=\"product-picture\">\n                    {images.length > 0 && (\n                      <img src={images[0].url} alt=\"\"/>\n                    )}\n                  </div>\n                  <div className=\"product-info\">\n                    <div className=\"name\">\n                      {product.name}\n                    </div>\n                    <ProductPrice product={product}/>\n                    <ProductDiscount product={product} discountRate={discountRate}/>\n                  </div>\n                </Link>\n              );\n            })}\n          </div>\n        )}\n\n        {product.price?.supplierSalePrice ? (\n          <div className=\"product-buying\">\n            <QuantityInput onChange={setQuantity} value={quantity}/>\n            <Button htmlType=\"button\" type=\"primary\" className=\"add-to-cart\" onClick={handleAddToCart}>\n              <img src=\"/images/add-to-cart.png\" alt=\"\"/>\n              <span className=\"adding-price\">\n              {formatNumber(addingPrice)}\n                <sup>đ</sup>\n            </span>\n            </Button>\n          </div>\n        ) : null}\n      </div>\n    </div>\n  );\n}\n\nexport default ProductDetails;\n","import {PRODUCT_LISTING_ROUTE} from 'config/route-consts';\nimport {calcDiscountRate} from 'helpers/number';\nimport {Product, ProductSearch} from 'models';\nimport React from 'react';\nimport {useHistory, useParams} from 'react-router-dom';\nimport {productRepository} from 'repositories';\nimport {RootObject} from 'teko-product-discovery';\n\ntype ProductDetailResult = [\n  Product,\n  Product[],\n  number,\n  () => void,\n];\n\nexport function useProductDetail(): ProductDetailResult {\n  const [product, setProduct] = React.useState<Product>(new Product());\n  const [similarProducts, setSimilarProducts] = React.useState<Product[]>([]);\n\n  const {id} = useParams();\n\n  React.useEffect(\n    () => {\n      if (id) {\n        productRepository.get(id, new ProductSearch())\n          .then((product: Product) => {\n            setProduct(product);\n          });\n      }\n    },\n    [id],\n  );\n\n  React.useEffect(\n    () => {\n      productRepository.search(new ProductSearch())\n        .then((rootObject: RootObject) => {\n          if (rootObject.result?.products) {\n            setSimilarProducts(rootObject.result.products);\n          }\n        });\n    },\n    [],\n  );\n\n  const discountRate: number = React.useMemo(\n    () => {\n      if (product?.price?.supplierSalePrice && product?.price.sellPrice) {\n        return calcDiscountRate(product?.price?.supplierSalePrice, product?.price.sellPrice);\n      }\n      return 0;\n    },\n    [product],\n  );\n\n  const history = useHistory();\n\n  const handleGoBack = React.useCallback(\n    () => {\n      history.push(PRODUCT_LISTING_ROUTE);\n    },\n    [history],\n  );\n\n  return [product, similarProducts, discountRate, handleGoBack];\n}\n","import {Product} from 'models';\nimport React, {Dispatch, SetStateAction} from 'react';\n\nexport type AddingPriceResult = [\n  number,\n  Dispatch<SetStateAction<number>>,\n  number,\n];\n\nexport function useAddingPrice(product: Product): AddingPriceResult {\n  const [quantity, setQuantity] = React.useState<number>(0);\n\n  const addingPrice: number = React.useMemo(\n    () => {\n      return quantity * (product.price?.sellPrice || product.price?.supplierSalePrice || 0);\n    },\n    [product.price, quantity],\n  );\n\n  return [\n    quantity,\n    setQuantity,\n    addingPrice,\n  ];\n}\n","import {GlobalState} from 'config/global';\nimport {CartContent, Product} from 'models';\nimport React from 'reactn';\nimport {StateTuple} from 'reactn/types/use-global';\n\ntype CartResult = [\n  StateTuple<GlobalState, 'cartContents'>[0],\n  StateTuple<GlobalState, 'cartContents'>[1],\n  (product: Product, quantity: number) => void,\n];\n\nexport function useCart(): CartResult {\n  const [cartContents, setCartContents] = React.useGlobal<GlobalState, 'cartContents'>('cartContents');\n\n  const handleAddToCart = React.useCallback(\n    async (product: Product, quantity: number) => {\n      const currentIndex: number = cartContents.findIndex((cartContent: CartContent) => {\n        return cartContent.product?.sku === product.sku;\n      });\n      let cartContent: CartContent;\n      if (currentIndex >= 0) {\n        cartContent = cartContents[currentIndex];\n        cartContent.quantity += quantity;\n      } else {\n        cartContent = new CartContent();\n        cartContent.product = product;\n        cartContent.quantity = quantity;\n        cartContents.push(cartContent);\n      }\n      await setCartContents([...cartContents]);\n    },\n    [cartContents, setCartContents],\n  );\n\n  return [cartContents, setCartContents, handleAddToCart];\n}\n","import React from 'reactn';\nimport {Image} from 'teko-product-discovery';\n\ntype SlideResult = [\n  number,\n  boolean,\n  () => void,\n  () => void,\n  (index: number) => void,\n  () => void,\n  () => void,\n];\n\nexport function useSlide(images: Image[]): SlideResult {\n  const [animating, setAnimating] = React.useState<boolean>(false);\n\n  const [activeIndex, setActiveIndex] = React.useState<number>(0);\n\n  const handleNext = React.useCallback(\n    () => {\n      if (!animating) {\n        setActiveIndex((activeIndex + 1) % images.length);\n      }\n    },\n    [animating, activeIndex, images.length],\n  );\n\n  const handlePrev = React.useCallback(\n    () => {\n      if (!animating) {\n        setActiveIndex((activeIndex - 1 + images.length) % images.length);\n      }\n    },\n    [animating, activeIndex, images.length],\n  );\n\n  const handleGoToIndex = React.useCallback(\n    (activeIndex: number) => {\n      if (!animating) {\n        setActiveIndex(activeIndex);\n      }\n    },\n    [animating],\n  );\n\n  const handleExisting = React.useCallback(\n    () => {\n      setAnimating(true);\n    },\n    [setAnimating],\n  );\n\n  const handleExisted = React.useCallback(\n    () => {\n      setAnimating(false);\n    },\n    [setAnimating],\n  );\n\n  return [\n    activeIndex,\n    animating,\n    handleNext,\n    handlePrev,\n    handleGoToIndex,\n    handleExisting,\n    handleExisted,\n  ];\n}\n"],"sourceRoot":""}