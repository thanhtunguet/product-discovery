(this["webpackJsonpteko-product-discovery"]=this["webpackJsonpteko-product-discovery"]||[]).push([[6],{150:function(t,e,a){"use strict";function n(t){if(null===t||void 0===t)return"";for(var e=t.toString(),a=/(-?\d+)(\d{3})/;a.test(e);)e=e.replace(a,"$1.$2");return e}function i(t,e){return Math.floor((t-e)/t*100)}a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return i}))},159:function(t,e,a){"use strict";var n=a(148),i=function t(){Object(n.a)(this,t),this.product=void 0,this.quantity=0},r=function t(){Object(n.a)(this,t),this.sku=void 0,this.name=void 0,this.url=void 0,this.seller=void 0,this.brand=void 0,this.status=void 0,this.objective=void 0,this.productType=void 0,this.images=void 0,this.price=void 0,this.productLine=void 0,this.stocks=void 0,this.totalAvailable=void 0,this.isBundle=void 0,this.bundleProducts=void 0,this.parentBundles=void 0,this.totalAvailableByStocks=void 0,this.displayName=void 0,this.color=void 0,this.tags=void 0,this.promotionPrices=void 0,this.promotions=void 0,this.flashSales=void 0,this.attributeSet=void 0,this.categories=void 0,this.magentoId=void 0,this.seoInfo=void 0,this.rating=void 0,this.allActiveFlashSales=void 0,this.productGroup=void 0,this.attributes=void 0,this.saleCategories=void 0,this.taxOut=void 0,this.taxOutCode=void 0,this.attributeGroups=void 0,this.warranty=void 0,this.createdAt=void 0,this.salePoint=void 0,this.importPrice=void 0,this.recommendMethod=void 0},o=function t(){Object(n.a)(this,t),this.saleCategories=613,this.channel="pv_online",this.terminal="phongvu",this.saleStatuses="hang_ban,hang_dat_truoc,hang_sap_het,hang_moi,hang_trung_bay,hang_thanh_ly",this._sort="saleStatuses||hang_ban|hang_dat_truoc|hang_sap_het|hang_moi||hang_trung_bay|hang_thanh_ly||ngung_kinh_doanh",this._order="asc",this._page=1,this._limit=10,this.q=void 0};a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return o}))},160:function(t,e,a){"use strict";var n=a(150),i=a(0),r=a.n(i);a(161);e.a=function(t){var e,a=t.product,i=t.discountRate;return i>0?r.a.createElement("div",{className:"product-discount"},r.a.createElement("div",{className:"product-discount-price"},Object(n.b)(null===(e=a.price)||void 0===e?void 0:e.sellPrice),r.a.createElement("sup",null,"\u0111")),r.a.createElement("div",{className:"product-discount-rate"},"-".concat(i,"%"))):null}},161:function(t,e,a){},162:function(t,e,a){"use strict";var n=a(150),i=a(0),r=a.n(i);a(163);e.a=function(t){var e,a,i=t.product;return(null===i||void 0===i?void 0:null===(e=i.price)||void 0===e?void 0:e.supplierSalePrice)?r.a.createElement("div",{className:"product-price"},Object(n.b)(null===(a=i.price)||void 0===a?void 0:a.supplierSalePrice),r.a.createElement("sup",null,"\u0111")):null}},163:function(t,e,a){},172:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var n=a(183),i=a.n(n);function r(t){var e;return"".concat(i()((null===t||void 0===t?void 0:null===(e=t.name)||void 0===e?void 0:e.toLowerCase())||""),"-pro.").concat(null===t||void 0===t?void 0:t.sku)}},173:function(t,e,a){"use strict";var n=a(19),i=a.n(n),r=a(148),o=a(203),c=a(184),s=a(205),u={withCredentials:!0,baseURL:"https://listing.stage.tekoapis.net",headers:{"Content-Type":"application/json"}},l=a(185),d=a(186),v=a.n(d),p=new(function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(o.a)(this,Object(c.a)(e).call(this,u))).search=function(e){return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",t.http.get("/api/search/",{params:e}).then((function(t){return t.data})));case 1:case"end":return a.stop()}}))},t.get=function(e,a){var n,r;return i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,i.a.awrap(t.http.get("/api/products/".concat(e),{params:a}));case 2:return n=o.sent,r=n.data.result.product,o.abrupt("return",r);case 5:case"end":return o.stop()}}))},t}return Object(s.a)(e,t),e}(function(){function t(e){Object(r.a)(this,t),this.http=void 0,this.http=v.a.create(u)}return Object(l.a)(t,[{key:"setBaseURL",value:function(t){this.http.defaults.baseURL=t}}]),t}()));a.d(e,"a",(function(){return p}))},306:function(t,e,a){},307:function(t,e,a){},311:function(t,e,a){"use strict";function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach((function(e){n(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}a.r(e);var o=a(152),c=a(195),s=a.n(c),u=a(49),l=a.n(u),d=a(160),v=a(162),p=a(150),h=a(172),f=a(0),m=a.n(f);a(306);var b=function(t){var e,a,n,i=t.product,r=(null===i||void 0===i?void 0:null===(e=i.price)||void 0===e?void 0:e.supplierSalePrice)&&(null===i||void 0===i?void 0:null===(a=i.price)||void 0===a?void 0:a.sellPrice)?Object(p.a)(null===i||void 0===i?void 0:i.price.supplierSalePrice,null===i||void 0===i?void 0:null===(n=i.price)||void 0===n?void 0:n.sellPrice):0;return m.a.createElement("a",{role:"menuitem",href:Object(h.a)(i),className:"product-list-item"},m.a.createElement("li",null,m.a.createElement("div",{className:"product-picture"},m.a.createElement("img",{src:(null===i||void 0===i?void 0:i.images)&&(null===i||void 0===i?void 0:i.images.length)>0?null===i||void 0===i?void 0:i.images[0].url:"",alt:""})),m.a.createElement("div",{className:"product-info"},m.a.createElement("span",{className:"product-name"},null===i||void 0===i?void 0:i.name),m.a.createElement(v.a,{product:i}),m.a.createElement(d.a,{product:i,discountRate:r}))))},g=a(19),O=a.n(g),y=a(202),E=a(76),j=a.n(E);var _=a(159),w=a(173),k="REPLACE",P="CONCAT",N="LOAD_PAGE";function C(t,e){switch(e.type){case k:t.list=e.data;break;case P:t.list=[].concat(Object(y.a)(t.list),Object(y.a)(e.data));break;case N:t.loadedPages[e.data]=!0}return r({},t)}function S(){var t,e=m.a.useState(new _.c),a=Object(o.a)(e,2),n=a[0],i=a[1],c=m.a.useState(!1),s=Object(o.a)(c,2),u=s[0],l=s[1],d=m.a.useReducer(C,{list:[],loadedPages:{}}),v=Object(o.a)(d,2),p=v[0],h=p.list,f=p.loadedPages,b=v[1],g=m.a.useState(0),y=Object(o.a)(g,2),E=y[0],S=y[1],x=E>n._page*n._limit,L=m.a.useCallback((function(t){var e,a=arguments;return O.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=a.length>1&&void 0!==a[1]?a[1]:P,l(!0),b({type:N,data:(null===t||void 0===t?void 0:t._page)||1}),n.next=5,O.a.awrap(w.a.search(t||new _.c).then((function(a){var n,r;if((null===(n=a.extra)||void 0===n?void 0:n.totalItems)&&(null===(r=a.result)||void 0===r?void 0:r.products)){var o,c;t&&i(t);var s=null===(o=a.result)||void 0===o?void 0:o.products;S(null===(c=a.extra)||void 0===c?void 0:c.totalItems),b({type:e,data:s})}})).finally((function(){l(!1)})));case 5:case"end":return n.stop()}}))}),[]),A=m.a.useCallback((function(t){L(t,k)}),[L]),R=m.a.useCallback((t=function(){var t,e;return O.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!u){a.next=2;break}return a.abrupt("return");case 2:if(window.innerHeight+document.documentElement.scrollTop!==document.documentElement.offsetHeight){a.next=8;break}if(t=n._page+1,f[t]||u){a.next=8;break}return e=r({},n,{_page:t}),a.next=8,O.a.awrap(L(e));case 8:case"end":return a.stop()}}))},j()(t,400)),[u,f]);return m.a.useEffect((function(){L()}),[L]),[h,E,n,A,u,x,R]}a(307);e.default=function(){var t=S(),e=Object(o.a)(t,7),a=e[0],n=e[2],i=e[3],c=e[5],u=e[6];m.a.useEffect((function(){return window.addEventListener("scroll",u),function(){window.removeEventListener("scroll",u)}}),[u]);var d=m.a.useMemo((function(){return a.map((function(t){return m.a.createElement(b,{product:t,key:t.sku})}))}),[a]),v=m.a.useCallback((function(t){i(r({},n,{q:t.target.value,_page:1}))}),[i,n]),p=m.a.useCallback((function(){s.a.info("\u0110\xe2y l\xe0 b\xe0i test, ch\u1ec9 c\xf3 m\u1ed9t module, v\xec th\u1ebf n\xfat back n\xe0y kh\xf4ng d\u1eabn \u0111i \u0111\xe2u c\u1ea3 :D")}),[]);return m.a.createElement("div",{className:"view mobile-view products"},m.a.createElement("div",{className:"header"},m.a.createElement("button",{type:"button",className:"btn btn-link btn-go-back",onClick:p},m.a.createElement("img",{className:"history-back-button",src:"/images/arrow-back.png",alt:""})),m.a.createElement("div",{className:"input-group"},m.a.createElement("div",{className:"input-group-prepend"},m.a.createElement("img",{src:"/images/search.png",alt:""})),m.a.createElement("input",{type:"text",className:"form-control search",defaultValue:n.q,onChange:v,placeholder:"Nh\u1eadp t\xean, m\xe3 s\u1ea3n ph\u1ea9m"}))),m.a.createElement("ul",{className:"product-list"},d,c&&m.a.createElement("div",{className:"infinite-scroll-loading"},m.a.createElement(l.a,null))))}}}]);
//# sourceMappingURL=6.758b828c.chunk.js.map