(this["webpackJsonpteko-product-discovery"]=this["webpackJsonpteko-product-discovery"]||[]).push([[6],{150:function(t,e,a){"use strict";function n(t){if(null===t||void 0===t)return"";for(var e=t.toString(),a=/(-?\d+)(\d{3})/;a.test(e);)e=e.replace(a,"$1.$2");return e}function i(t,e){return Math.floor((t-e)/t*100)}a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return i}))},159:function(t,e,a){"use strict";var n=a(148),i=function t(){Object(n.a)(this,t),this.product=void 0,this.quantity=0},r=function t(){Object(n.a)(this,t),this.sku=void 0,this.name=void 0,this.url=void 0,this.seller=void 0,this.brand=void 0,this.status=void 0,this.objective=void 0,this.productType=void 0,this.images=void 0,this.price=void 0,this.productLine=void 0,this.stocks=void 0,this.totalAvailable=void 0,this.isBundle=void 0,this.bundleProducts=void 0,this.parentBundles=void 0,this.totalAvailableByStocks=void 0,this.displayName=void 0,this.color=void 0,this.tags=void 0,this.promotionPrices=void 0,this.promotions=void 0,this.flashSales=void 0,this.attributeSet=void 0,this.categories=void 0,this.magentoId=void 0,this.seoInfo=void 0,this.rating=void 0,this.allActiveFlashSales=void 0,this.productGroup=void 0,this.attributes=void 0,this.saleCategories=void 0,this.taxOut=void 0,this.taxOutCode=void 0,this.attributeGroups=void 0,this.warranty=void 0,this.createdAt=void 0,this.salePoint=void 0,this.importPrice=void 0,this.recommendMethod=void 0},o=function t(){Object(n.a)(this,t),this.saleCategories=613,this.channel="pv_online",this.terminal="phongvu",this.saleStatuses="hang_ban,hang_dat_truoc,hang_sap_het,hang_moi,hang_trung_bay,hang_thanh_ly",this._sort="saleStatuses||hang_ban|hang_dat_truoc|hang_sap_het|hang_moi||hang_trung_bay|hang_thanh_ly||ngung_kinh_doanh",this._order="asc",this._page=1,this._limit=10,this.q=void 0};a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return o}))},160:function(t,e,a){"use strict";var n=a(150),i=a(0),r=a.n(i);a(161);e.a=function(t){var e,a=t.product,i=t.discountRate;return i>0?r.a.createElement("div",{className:"product-discount"},r.a.createElement("div",{className:"product-discount-price"},Object(n.b)(null===(e=a.price)||void 0===e?void 0:e.sellPrice),r.a.createElement("sup",null,"\u0111")),r.a.createElement("div",{className:"product-discount-rate"},"-".concat(i,"%"))):null}},161:function(t,e,a){},162:function(t,e,a){"use strict";var n=a(150),i=a(0),r=a.n(i);a(163);e.a=function(t){var e,a,i=t.product;return(null===i||void 0===i?void 0:null===(e=i.price)||void 0===e?void 0:e.supplierSalePrice)?r.a.createElement("div",{className:"product-price"},Object(n.b)(null===(a=i.price)||void 0===a?void 0:a.supplierSalePrice),r.a.createElement("sup",null,"\u0111")):null}},163:function(t,e,a){},172:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var n=a(183),i=a.n(n);function r(t){var e;return"".concat(i()((null===t||void 0===t?void 0:null===(e=t.name)||void 0===e?void 0:e.toLowerCase())||""),"-pro.").concat(null===t||void 0===t?void 0:t.sku)}},173:function(t,e,a){"use strict";var n=a(19),i=a.n(n),r=a(148),o=a(203),c=a(184),s=a(205),u={withCredentials:!0,baseURL:"https://listing.stage.tekoapis.net",headers:{"Content-Type":"application/json"}},l=a(185),d=a(186),p=a.n(d),v=new(function(t){function e(){var t;return Object(r.a)(this,e),(t=Object(o.a)(this,Object(c.a)(e).call(this,u))).search=function(e){return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",t.http.get("/api/search/",{params:e}).then((function(t){return t.data})));case 1:case"end":return a.stop()}}))},t.get=function(e,a){var n,r;return i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,i.a.awrap(t.http.get("/api/products/".concat(e),{params:a}));case 2:return n=o.sent,r=n.data.result.product,o.abrupt("return",r);case 5:case"end":return o.stop()}}))},t}return Object(s.a)(e,t),e}(function(){function t(e){Object(r.a)(this,t),this.http=void 0,this.http=p.a.create(u)}return Object(l.a)(t,[{key:"setBaseURL",value:function(t){this.http.defaults.baseURL=t}}]),t}()));a.d(e,"a",(function(){return v}))},306:function(t,e,a){},307:function(t,e,a){},311:function(t,e,a){"use strict";a.r(e);var n=a(152),i=a(195),r=a.n(i),o=a(49),c=a.n(o),s=a(160),u=a(162),l=a(150),d=a(172),p=a(0),v=a.n(p);a(306);var h=function(t){var e,a,n,i=t.product,r=(null===i||void 0===i?void 0:null===(e=i.price)||void 0===e?void 0:e.supplierSalePrice)&&(null===i||void 0===i?void 0:null===(a=i.price)||void 0===a?void 0:a.sellPrice)?Object(l.a)(null===i||void 0===i?void 0:i.price.supplierSalePrice,null===i||void 0===i?void 0:null===(n=i.price)||void 0===n?void 0:n.sellPrice):0;return v.a.createElement("a",{role:"menuitem",href:Object(d.a)(i),className:"product-list-item"},v.a.createElement("li",null,v.a.createElement("div",{className:"product-picture"},v.a.createElement("img",{src:(null===i||void 0===i?void 0:i.images)&&(null===i||void 0===i?void 0:i.images.length)>0?null===i||void 0===i?void 0:i.images[0].url:"",alt:""})),v.a.createElement("div",{className:"product-info"},v.a.createElement("span",{className:"product-name"},null===i||void 0===i?void 0:i.name),v.a.createElement(u.a,{product:i}),v.a.createElement(s.a,{product:i,discountRate:r}))))},m=a(19),f=a.n(m),b=a(202);function g(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function O(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function _(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?O(Object(a),!0).forEach((function(e){g(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var y=a(76),E=a.n(y);var j=a(159),N=a(173),k="CONCAT",w="TURN_ON_SPINNING",P="TURN_OFF_SPINNING",C="UPDATE_SEARCH_QUERY",S="LOAD_MORE_PAGE";function A(t,e){switch(e.type){case w:t.loading=!0;break;case P:t.loading=!1;break;case C:t.action="REPLACE",t.search=_({},t.search,{q:e.data.q,_page:1});break;case S:t.search=_({},t.search,{_page:t.search._page+1}),t.action="CONCAT";break;case k:"CONCAT"===t.action?t.list=[].concat(Object(b.a)(t.list),Object(b.a)(e.data.products)):t.list=Object(b.a)(e.data.products),t.total=e.data.total,t.loadedPages[e.data.page]=!0}return _({},t)}function R(){var t,e=v.a.useReducer(A,{list:[],loadedPages:{},search:new j.c,total:0,loading:!1,action:"CONCAT"}),a=Object(n.a)(e,2),i=a[0],r=i.list,o=i.loadedPages,c=i.search,s=i.total,u=i.loading,l=i.action,d=a[1],p=s>c._page*c._limit,h=v.a.useCallback((t=function(t){d({type:C,data:{q:t}})},E()(t,400)),[]),m=v.a.useCallback((function(t){var e,a,n;return f.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return d({type:w}),i.next=3,f.a.awrap(N.a.search(c));case 3:n=i.sent,d({type:P}),d({type:k,data:{products:(null===(e=n.result)||void 0===e?void 0:e.products)||[],total:(null===(a=n.extra)||void 0===a?void 0:a.totalItems)||0,page:c._page,action:t}});case 6:case"end":return i.stop()}}))}),[c]),b=v.a.useCallback((function(){var t;return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=2;break}return e.abrupt("return");case 2:window.innerHeight+document.documentElement.scrollTop===document.documentElement.offsetHeight&&(t=c._page+1,o[t]||d({type:S}));case 3:case"end":return e.stop()}}))}),[o,u,c._page]);return v.a.useEffect((function(){m(l)}),[l,m]),[r,s,c,h,u,p,b]}a(307);e.default=function(){var t=R(),e=Object(n.a)(t,7),a=e[0],i=e[2],o=e[3],s=e[5],u=e[6],l=v.a.useMemo((function(){return a.map((function(t){return v.a.createElement(h,{product:t,key:t.sku})}))}),[a]),d=v.a.useCallback((function(t){o(t.target.value)}),[o]);v.a.useEffect((function(){return window.addEventListener("scroll",u),function(){window.removeEventListener("scroll",u)}}),[u]);var p=v.a.useCallback((function(){r.a.info("\u0110\xe2y l\xe0 b\xe0i test, ch\u1ec9 c\xf3 m\u1ed9t module, v\xec th\u1ebf n\xfat back n\xe0y kh\xf4ng d\u1eabn \u0111i \u0111\xe2u c\u1ea3 :D")}),[]);return v.a.createElement("div",{className:"view mobile-view products"},v.a.createElement("div",{className:"header"},v.a.createElement("button",{type:"button",className:"btn btn-link btn-go-back",onClick:p},v.a.createElement("img",{className:"history-back-button",src:"/images/arrow-back.png",alt:""})),v.a.createElement("div",{className:"input-group"},v.a.createElement("div",{className:"input-group-prepend"},v.a.createElement("img",{src:"/images/search.png",alt:""})),v.a.createElement("input",{type:"text",className:"form-control search",defaultValue:i.q,onChange:d,placeholder:"Nh\u1eadp t\xean, m\xe3 s\u1ea3n ph\u1ea9m"}))),v.a.createElement("ul",{className:"product-list"},l,s&&v.a.createElement("div",{className:"infinite-scroll-loading"},v.a.createElement(c.a,null))))}}}]);
//# sourceMappingURL=6.beb27e93.chunk.js.map